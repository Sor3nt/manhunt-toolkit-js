import {Bone, Color, Matrix4, Quaternion, SkinnedMesh, Vector2, Vector3, Vector4} from "../Vendor/three.module.mjs";

class ManhuntMatrix {

    boneId2BoneType = {
        'bone_0': 3,
        'bone_1': 3,
        'bone_2': 3,
        'bone_3': 1,
        'bone_4': 3,
        'bone_5': 0,
        'bone_10001': 1,
        'bone_10002': 1,
        'bone_10003': 1,
        'bone_10004': 1,
        'bone_10005': 1,
        'bone_10006': 1,
        'bone_10007': 1,
        'bone_10008': 1,
        'bone_10009': 1,
        'bone_10010': 1,
        'bone_10011': 1,
        'bone_10012': 1,
        'bone_10013': 1,
        'bone_10014': 1,
        'bone_10015': 1,
        'bone_10016': 1,
        'bone_9999': 2,

        'bone_1000': 2,
        'bone_1009': 0,
        'bone_1015': 0,
        'bone_2222': 0,
        'bone_1063': 0,
        'bone_1069': 0,
        'bone_2003': 0,
        'bone_1045': 2,
        'bone_1094': 0,//2
        'bone_1095': 0,
        'bone_1096': 2,//0
        'bone_1040': 2,
        'bone_1001': 0,//0 or 1? 0 is present on danny 3ds export
        'bone_5015': 3,
        'bone_5013': 3,
        'bone_5014': 3,
        'bone_5020': 3,
        'bone_5021': 3,
        'bone_5004': 3,
        'bone_5003': 3,
        'bone_5006': 3,
        'bone_5005': 3,
        'bone_5001': 3,
        'bone_5002': 3,
        'bone_5018': 3,
        'bone_5019': 3,
        'bone_5017': 3,
        'bone_5022': 3,
        'bone_5008': 3,
        'bone_5007': 1,
        'bone_3333': 3,
        'bone_1003': 2,
        'bone_1039': 0,
        'bone_1020': 0,
        'bone_1021': 0,
        'bone_1004': 2,
        'bone_1006': 1,
        'bone_1005': 2,
        'bone_1011': 1,
        'bone_1008': 0,
        'bone_1013': 1,
        'bone_1057': 2,//0
        'bone_1093': 0,
        'bone_1074': 0,
        'bone_1075': 0,
        'bone_1058': 2,
        'bone_1060': 1,
        'bone_1059': 2,
        'bone_1065': 1,
        'bone_1062': 0,
        'bone_1067': 1,
        'bone_1023': 2,
        'bone_1002': 0,
        'bone_1019': 0,
        'bone_1024': 1,
        'bone_1077': 2, //0
        'bone_1056': 0,
        'bone_1073': 0,
        'bone_1078': 1,
        'bone_4444': 3,
        'bone_5555': 3,
        'bone_6666': 1,
        'bone_7777': 1,
        'bone_8888': 1
    };


    bones = {
        mh1 : {
            'Bip01': 1000,
            'Bip01 Head': 1001,
            'Bip01 L Calf': 1002,
            'Bip01 L Clavicle': 1003,
            'Bip01 L Finger0': 1004,
            'Bip01 L Finger1': 1005,
            'Bip01 L Finger01': 1006,
            'Bip01 L Finger2': 1008,
            'Bip01 L Finger3': 1009,
            'Bip01 L Finger11': 1011,
            'Bip01 L Finger21': 1013,
            'Bip01 L Finger31': 1015,
            'Bip01 L Foot': 1019,
            'Bip01 L Forearm': 1020,
            'Bip01 L Hand': 1021,
            'Bip01 L Thigh': 1023,
            'Bip01 L Toe0': 1024,
            'Bip01 L UpperArm': 1039,
            'Bip01 Neck': 1040,
            'Bip01 Pelvis': 1045,
            'Bip01 R Calf': 1056,
            'Bip01 R Clavicle': 1057,
            'Bip01 R Finger0': 1058,
            'Bip01 R Finger1': 1059,
            'Bip01 R Finger01': 1060,
            'Bip01 R Finger2': 1062,
            'Bip01 R Finger3': 1063,
            'Bip01 R Finger11': 1065,
            'Bip01 R Finger21': 1067,
            'Bip01 R Finger31': 1069,
            'Bip01 R Foot': 1073,
            'Bip01 R Forearm': 1074,
            'Bip01 R Hand': 1075,
            'Bip01 R Thigh': 1077,
            'Bip01 R Toe0': 1078,
            'Bip01 R UpperArm': 1093,
            'Bip01 Spine': 1094,
            'Bip01 Spine1': 1095,
            'Bip01 Spine2': 1096,
            'Arm Comp Bone 1': 2003,
            'Arm Comp Bone 2': 2222,
            'Back Weapon Slot': 3333,
            'Left Weapon Slot': 4444,
            'Right Weapon Slot': 5555,
            'Lure Slot': 6666,
            'Strap Bone 1': 7777,
            'Strap Bone 2': 8888,
            'Neck Compensator': 9999,
            'Player_Bod': 10000,
            'Bip01 HeadNub': 10001,
            'Neck Compensator Dummy': 10002,
            'Bip01 L Finger0Nub': 10003,
            'Bip01 L Finger1Nub': 10004,
            'Bip01 L Finger2Nub': 10005,
            'Bip01 L Finger3Nub': 10006,
            'Arm Comp Bone 2 Dummy': 10007,
            'Bip01 R Finger0Nub': 10008,
            'Bip01 R Finger1Nub': 10009,
            'Bip01 R Finger2Nub': 10010,
            'Bip01 R Finger3Nub': 10011,
            'Arm Comp Bone 1 Dummy': 10012,
            'Strap Bone 1 Dummy': 10013,
            'Strap Bone 2 Dummy': 10014,
            'Bip01 L Toe0Nub': 10015,
            'Bip01 R Toe0Nub': 10016
        },
        mh2: {
            BONE_JAW: 0,
            BONE_LEFT_BROW: 1,
            BONE_LIP_CORNER_R: 2,
            BONE_LIP_CORNER_L: 3,
            BONE_RIGHT_BROW: 4,
            BONE_ROOT: 5,
            Bip01: 1000,
            Bip01_Head: 1001,
            Bip01_L_Calf: 1002,
            Bip01_L_Clavicle: 1003,
            Bip01_L_Finger0: 1004,
            Bip01_L_Finger1: 1005,
            Bip01_L_Finger01: 1006,
            Bip01_L_Finger2: 1008,
            Bip01_L_Finger11: 1011,
            Bip01_L_Finger21: 1013,
            Bip01_L_Foot: 1019,
            Bip01_L_Forearm: 1020,
            Bip01_L_Hand: 1021,
            Bip01_L_Thigh: 1023,
            Bip01_L_Toe0: 1024,
            Bip01_L_UpperArm: 1039,
            Bip01_Neck: 1040,
            Bip01_Pelvis: 1045,
            Bip01_R_Calf: 1056,
            Bip01_R_Clavicle: 1057,
            Bip01_R_Finger0: 1058,
            Bip01_R_Finger1: 1059,
            Bip01_R_Finger01: 1060,
            Bip01_R_Finger2: 1062,
            Bip01_R_Finger11: 1065,
            Bip01_R_Finger21: 1067,
            Bip01_R_Foot: 1073,
            Bip01_R_Forearm: 1074,
            Bip01_R_Hand: 1075,
            Bip01_R_Thigh: 1077,
            Bip01_R_Toe0: 1078,
            Bip01_R_UpperArm: 1093,
            Bip01_Spine: 1094,
            Bip01_Spine1: 1095,
            Bip01_Spine2: 1096,
            Back_Weapon_Slot: 3333,
            Left_Weapon_Slot: 4444,

            /*MH2 Cutscene*/
            rcorner: 5013,
            lcorner: 5014,
            rcheek: 5020,
            lcheek: 5021,
            lbrow1: 5004,
            lbrow2: 5003,
            llid: 5006,
            rlid: 5005,
            rbrow1: 5001,
            rbrow2: 5002,
            reye: 5018,
            leye: 5019,
            X_llip1: 5017,
            X_llip11: 5022,
            X_ltlip3: 5008,
            X_rtlip3: 5007,

            Right_Weapon_Slot: 5555,
            Lure_Slot: 6666,
            STRAP1: 7777,
            STRAP2: 8888
        }
    }

    //Possible names for the boneIds
    boneIdNameMap = {
        '0': [ 'JAW' ],
        '1': [ 'LEFT_BROW', 'LEFT BROW' ],
        '2': [ 'LIP_CORNER_R', 'LIP CORNER R' ],
        '3': [ 'LIP_CORNER_L', 'LIP CORNER L' ],
        '4': [ 'RIGHT BROW', 'RIGHT_BROW' ],
        '5': [ 'Root' ],
        '1000': [ 'Bip01' ],
        '1001': [ 'Head'],
        '1002': [ 'L Calf', 'L_Calf' ],
        '1003': [ 'L Clavicle', 'L_Clavicle' ],
        '1004': [ 'L Finger0', 'L_Finger0' ],
        '1005': [ 'L Finger1', 'L_Finger1' ],
        '1006': [ 'L Finger01', 'L_Finger01' ],
        '1008': [ 'L Finger2', 'L_Finger2' ],
        '1009': [ 'L Finger3', 'L_Finger3' ],
        '1011': [ 'L Finger11', 'L_Finger11' ],
        '1013': [ 'L Finger21', 'L_Finger21' ],
        '1015': [ 'L Finger31', 'L_Finger31' ],
        '1019': [ 'L Foot', 'L_Foot' ],
        '1020': [ 'L Forearm', 'L_Forearm' ],
        '1021': [ 'L Hand', 'L_Hand' ],
        '1023': [ 'L Thigh', 'L_Thigh' ],
        '1024': [ 'L Toe0', 'L_Toe0' ],
        '1039': [ 'L UpperArm', 'L_UpperArm' ],
        '1040': [ 'Neck' ],
        '1045': [ 'Pelvis' ],
        '1056': [ 'R Calf', 'R_Calf' ],
        '1057': [ 'R Clavicle', 'R_Clavicle' ],
        '1058': [ 'R Finger0', 'R_Finger0' ],
        '1059': [ 'R Finger1', 'R_Finger1' ],
        '1060': [ 'R Finger01', 'R_Finger01' ],
        '1062': [ 'R Finger2', 'R_Finger2' ],
        '1063': [ 'R Finger3', 'R_Finger3' ],
        '1065': [ 'R Finger11', 'R_Finger11' ],
        '1067': [ 'R Finger21', 'R_Finger21' ],
        '1069': [ 'R Finger31', 'R_Finger31' ],
        '1073': [ 'R Foot', 'R_Foot' ],
        '1074': [ 'R Forearm', 'R_Forearm' ],
        '1075': [ 'R Hand', 'R_Hand' ],
        '1077': [ 'R Thigh', 'R_Thigh' ],
        '1078': [ 'R Toe0', 'R_Toe0' ],
        '1093': [ 'R UpperArm', 'R_UpperArm' ],
        '1094': [ 'Spine' ],
        '1095': [ 'Spine1' ],
        '1096': [ 'Spine2' ],
        '2003': [ 'Arm Comp Bone 1' ],
        '2222': [ 'Arm Comp Bone 2' ],
        '3333': [ 'Back Weapon Slot', 'Back_Weapon_Slot' ],
        '4444': [ 'Left Weapon Slot', 'Left_Weapon_Slot' ],
        '5555': [ 'Right Weapon Slot', 'Right_Weapon_Slot' ],
        '6666': [ 'Lure Slot', 'Lure_Slot' ],
        '7777': [ 'Strap Bone 1', 'STRAP1' ],
        '8888': [ 'Strap Bone 2', 'STRAP2' ],
        '9999': [ 'Neck Compensator' ],
        '10000': [ 'Player_Bod' ],
        '10001': [ 'HeadNub' ],
        '10002': [ 'Neck Compensator Dummy' ],
        '10003': [ 'L Finger0Nub' ],
        '10004': [ 'L Finger1Nub' ],
        '10005': [ 'L Finger2Nub' ],
        '10006': [ 'L Finger3Nub' ],
        '10007': [ 'Arm Comp Bone 2 Dummy' ],
        '10008': [ 'R Finger0Nub' ],
        '10009': [ 'R Finger1Nub' ],
        '10010': [ 'R Finger2Nub' ],
        '10011': [ 'R Finger3Nub' ],
        '10012': [ 'Arm Comp Bone 1 Dummy' ],
        '10013': [ 'Strap Bone 1 Dummy' ],
        '10014': [ 'Strap Bone 2 Dummy' ],
        '10015': [ 'L Toe0Nub' ],
        '10016': [ 'R Toe0Nub' ]
    }


    template = {
        mh2: {
            "Bip01": {
                "quaternion": [
                    0,
                    0.7071087199390368,
                    0,
                    0.7071048424287426
                ],
                "position": [
                    -6.656362216972411e-8,
                    1.0176219940185547,
                    0.0015979651361703873
                ]
            },
            "L0": {
                "quaternion": [
                    0,
                    0,
                    0,
                    1
                ],
                "position": [
                    -0.0002589244395494461,
                    0.0027858030516654253,
                    -0.005229692906141281
                ]
            },
            "weapstrap": {
                "quaternion": [
                    0,
                    0,
                    0,
                    1
                ],
                "position": [
                    0,
                    0.0027858030516654253,
                    -0.005229692906141281
                ]
            }
        }
    }

    matrices = {
        mh1: {
            pc2: {

                "Bip01": {
                    "quaternion": [
                        0,
                        0.7071087620858136,
                        0,
                        0.7071048002817321
                    ],
                    "position": [
                        0,
                        1.15944504737854,
                        0
                    ]
                },
                "Bip01_Pelvis": {
                    "quaternion": [
                        -0.499999306600356,
                        -0.4999999999998864,
                        0.5000000000000001,
                        0.500000693399644
                    ],
                    "position": [
                        -0.013477997854351997,
                        0,
                        -3.3954853055487896e-15
                    ]
                },
                "Bip01_Spine": {
                    "quaternion": [
                        -0.000002044852031951548,
                        -0.04758040958413918,
                        6.596225664546324e-7,
                        0.9988674109305945
                    ],
                    "position": [
                        0.12236154079437256,
                        1.2955951686922235e-14,
                        0.00009917338320519775
                    ]
                },
                "Bip01_Spine1": {
                    "quaternion": [
                        -4.0980621630167184e-14,
                        0.004363488870236887,
                        -1.5904606292789292e-15,
                        0.9999904799371239
                    ],
                    "position": [
                        0.12504687905311584,
                        -2.1068690954188785e-15,
                        0.00011118924157926813
                    ]
                },
                "Bip01_Spine2": {
                    "quaternion": [
                        -6.760399944485702e-14,
                        -0.013089605604103691,
                        8.126812445836514e-15,
                        0.9999143274426708
                    ],
                    "position": [
                        0.1396312415599823,
                        -3.3845623921774717e-15,
                        0.000138491639518179
                    ]
                },
                "Bip01_Neck": {
                    "quaternion": [
                        8.310988269029726e-14,
                        0.31316310485210863,
                        8.685892514481249e-7,
                        0.9496993575646487
                    ],
                    "position": [
                        0.1740206778049469,
                        9.979458428512836e-15,
                        0.00005906123624299653
                    ]
                },
                "Bip01_Head": {
                    "quaternion": [
                        -5.421597657546306e-14,
                        -0.21682886137697563,
                        -6.013949260684837e-7,
                        0.9762096316230544
                    ],
                    "position": [
                        0.09224694222211838,
                        8.643030003719146e-14,
                        1.901768520440328e-8
                    ]
                },
                "Bip01_L_Clavicle": {
                    "quaternion": [
                        0.5651010236602955,
                        0.7631203852215195,
                        0.18659237784869434,
                        0.25197500249417454
                    ],
                    "position": [
                        -0.020777201279997826,
                        0.05176503583788872,
                        -0.013333484530448914
                    ]
                },
                "Bip01_L_UpperArm": {
                    "quaternion": [
                        0.05244290842550474,
                        0.04512827761439671,
                        0.11219665404313475,
                        0.9912744780201701
                    ],
                    "position": [
                        0.19741997122764587,
                        -1.4646444057575536e-8,
                        3.801365444644489e-9
                    ]
                },
                "Bip01_L_Forearm": {
                    "quaternion": [
                        -1.484189154532868e-11,
                        -0.04326339979016137,
                        9.682470496562452e-10,
                        0.9990637007911942
                    ],
                    "position": [
                        0.2782229781150818,
                        7.782575295323113e-8,
                        1.3256373776471264e-9
                    ]
                },
                "Bip01_L_Hand": {
                    "quaternion": [
                        -0.7064963650935524,
                        -0.02157346120990692,
                        0.0524115679287741,
                        0.7054434778357188
                    ],
                    "position": [
                        0.3018489480018616,
                        -8.934208040045633e-8,
                        -6.662896900877513e-9
                    ]
                },
                "Bip01_L_Finger0": {
                    "quaternion": [
                        0.629603269400311,
                        0.17468947724519904,
                        -0.528213365126921,
                        0.5422858053079519
                    ],
                    "position": [
                        0.01603303663432598,
                        -0.048042941838502884,
                        -0.016236795112490654
                    ]
                },
                "Bip01_L_Finger01": {
                    "quaternion": [
                        -8.893526336036535e-9,
                        0.07845925463190713,
                        -1.2809093488479474e-8,
                        0.9969173212270939
                    ],
                    "position": [
                        0.043717045336961746,
                        -1.7652121542255372e-8,
                        -1.0761326052488585e-8
                    ]
                },
                "Bip01_L_Finger1": {
                    "quaternion": [
                        0.02197138547534329,
                        0.5180612198335819,
                        -0.016222680934359416,
                        0.8549073967575761
                    ],
                    "position": [
                        0.10538800805807114,
                        -0.04381046071648598,
                        0.001947849290445447
                    ]
                },
                "Bip01_L_Finger11": {
                    "quaternion": [
                        -4.488687028166577e-10,
                        0.22069731079915353,
                        -1.3663729012107879e-12,
                        0.9753423486171464
                    ],
                    "position": [
                        0.045463044196367264,
                        4.540371412176114e-10,
                        4.868518921341547e-9
                    ]
                },
                "Bip01_L_Finger2": {
                    "quaternion": [
                        -0.00036580468374814795,
                        0.3947438439447667,
                        -0.00015716329073835203,
                        0.9187911292313005
                    ],
                    "position": [
                        0.10965996980667114,
                        -0.011875190772116184,
                        0.00478340033441782
                    ]
                },
                "Bip01_L_Finger21": {
                    "quaternion": [
                        6.196708079448586e-10,
                        0.3826833350185592,
                        -1.8522837642683105e-10,
                        0.923879572833534
                    ],
                    "position": [
                        0.04700702428817749,
                        -1.5936492125945279e-9,
                        3.9570224430462986e-8
                    ]
                },
                "Bip01_R_Clavicle": {
                    "quaternion": [
                        -0.5651003160297337,
                        0.763120910398211,
                        -0.18659025211468128,
                        0.25197656947629987
                    ],
                    "position": [
                        -0.020777219906449318,
                        -0.05176496133208275,
                        -0.013333787210285664
                    ]
                },
                "Bip01_R_UpperArm": {
                    "quaternion": [
                        -0.05244292416843588,
                        0.04512818818246081,
                        -0.11219664717966088,
                        0.9912744820214109
                    ],
                    "position": [
                        0.19741998612880707,
                        -3.76505049359821e-8,
                        9.722119109767391e-9
                    ]
                },
                "Bip01_R_Forearm": {
                    "quaternion": [
                        6.87064170836067e-11,
                        -0.04326339608229133,
                        3.226609491736639e-10,
                        0.9990637009517596
                    ],
                    "position": [
                        0.2782229781150818,
                        -6.747267633500087e-8,
                        3.1879983097837794e-9
                    ]
                },
                "Bip01_R_Hand": {
                    "quaternion": [
                        0.7064963654934294,
                        -0.02157345859867603,
                        -0.05241156529416078,
                        0.7054434778252977
                    ],
                    "position": [
                        0.3018488883972168,
                        8.797891126732793e-8,
                        -3.2325336851712905e-10
                    ]
                },
                "Bip01_R_Finger0": {
                    "quaternion": [
                        -0.5950903222638326,
                        0.037494846581376806,
                        0.44928408417582666,
                        0.6652859737408783
                    ],
                    "position": [
                        0.01603299006819725,
                        0.04804293438792229,
                        -0.016236815601587296
                    ]
                },
                "Bip01_R_Finger01": {
                    "quaternion": [
                        1.0386105719670251e-8,
                        0.6723668352178735,
                        -8.244593066374175e-9,
                        0.7402181022503397
                    ],
                    "position": [
                        0.043717075139284134,
                        9.997179972742742e-9,
                        -1.942993765879919e-9
                    ]
                },
                "Bip01_R_Finger1": {
                    "quaternion": [
                        -0.002031645819669066,
                        0.3939833562367664,
                        0.06115841344870825,
                        0.917078316032
                    ],
                    "position": [
                        0.10538794845342636,
                        0.04381045699119568,
                        0.0019478305475786328
                    ]
                },
                "Bip01_R_Finger11": {
                    "quaternion": [
                        -1.2148844685670739e-9,
                        0.5000000078105779,
                        -2.762708942362519e-10,
                        0.8660253992749994
                    ],
                    "position": [
                        0.045462965965270996,
                        -1.0240361891789007e-9,
                        -5.863232388492179e-8
                    ]
                },
                "Bip01_R_Finger2": {
                    "quaternion": [
                        0.0003753007538854081,
                        0.33380680460278767,
                        0.00013290086920107665,
                        0.9426414263588239
                    ],
                    "position": [
                        0.10966002941131592,
                        0.011875191703438759,
                        0.004783425945788622
                    ]
                },
                "Bip01_R_Finger21": {
                    "quaternion": [
                        -3.765989443276793e-10,
                        0.500000031891232,
                        -1.1602604152287925e-10,
                        0.8660253853720263
                    ],
                    "position": [
                        0.04700698330998421,
                        -1.0815043305356653e-9,
                        1.2547157979270196e-8
                    ]
                },
                "STRAP1": {
                    "quaternion": [
                        -0.03980772781466427,
                        0.03980558194496516,
                        -0.7059854318837753,
                        0.7059854327678416
                    ],
                    "position": [
                        -0.02882593683898449,
                        -0.07227475941181183,
                        0.17933565378189087
                    ]
                },
                "Back_Weapon_Slot": {
                    "quaternion": [
                        -0.03980753155783461,
                        0.039805750451445875,
                        -0.7059854327541479,
                        0.7059854336661895
                    ],
                    "position": [
                        0.08832498639822006,
                        -0.019381660968065262,
                        0.15300974249839783
                    ]
                },
                "STRAP2": {
                    "quaternion": [
                        -0.021313487309775683,
                        0.021311388827762765,
                        -0.7067855275354393,
                        0.7067855259503878
                    ],
                    "position": [
                        -0.017643893137574196,
                        -0.13282422721385956,
                        0.09122199565172195
                    ]
                },
                "Bip01_L_Thigh": {
                    "quaternion": [
                        0.007608376656577619,
                        -0.1267019350608456,
                        0.9889506778429149,
                        0.07658517477645427
                    ],
                    "position": [
                        -0.12181694060564041,
                        0.1064099594950676,
                        0.011532459408044815
                    ]
                },
                "Bip01_L_Calf": {
                    "quaternion": [
                        5.500739116502633e-9,
                        -0.12338515904536286,
                        -1.2959732357078042e-9,
                        0.9923588577361269
                    ],
                    "position": [
                        0.5586508512496948,
                        8.920822303082332e-9,
                        -7.179898453557598e-9
                    ]
                },
                "Bip01_L_Foot": {
                    "quaternion": [
                        0.06881981580970363,
                        0.07881564116014746,
                        0.05950947382752857,
                        0.9927288402108199
                    ],
                    "position": [
                        0.4827589988708496,
                        1.0714061637884242e-8,
                        -5.963745053350067e-10
                    ]
                },
                "Bip01_L_Toe0": {
                    "quaternion": [
                        2.2841254472395914e-9,
                        0.7071067811865475,
                        -6.488307384639574e-10,
                        0.7071067811865476
                    ],
                    "position": [
                        0.1327420026063919,
                        -4.583634805044312e-9,
                        -0.1859399825334549
                    ]
                },
                "Bip01_R_Thigh": {
                    "quaternion": [
                        0.007608158861982731,
                        0.12669915014505423,
                        0.9889511117466538,
                        -0.07658420033796119
                    ],
                    "position": [
                        -0.12181694060564041,
                        -0.10641001909971237,
                        0.011531868949532509
                    ]
                },
                "Bip01_R_Calf": {
                    "quaternion": [
                        -3.648596482362335e-9,
                        -0.1233851554610982,
                        -3.762725855394835e-9,
                        0.9923588581817772
                    ],
                    "position": [
                        0.5586510300636292,
                        -1.041980990379443e-8,
                        -7.194803419707796e-9
                    ]
                },
                "Bip01_R_Foot": {
                    "quaternion": [
                        -0.06881959093711777,
                        0.07881570615305639,
                        -0.05950849871844927,
                        0.9927289090338023
                    ],
                    "position": [
                        0.48275893926620483,
                        -1.4308494833414898e-8,
                        1.0518656168301277e-8
                    ]
                },
                "Bip01_R_Toe0": {
                    "quaternion": [
                        -2.2843675554967207e-9,
                        0.7071067811865475,
                        6.483546864304844e-10,
                        0.7071067811865476
                    ],
                    "position": [
                        0.1327420026063919,
                        7.507450661137227e-9,
                        -0.1859399825334549
                    ]
                },
                "Left_Weapon_Slot": {
                    "quaternion": [
                        0.08759939931234592,
                        0.7517140552130894,
                        0.06975368925574386,
                        0.6499128729951773
                    ],
                    "position": [
                        0.024151265621185303,
                        0.008254767395555973,
                        -0.19834157824516296
                    ]
                },
                "Right_Weapon_Slot": {
                    "quaternion": [
                        -0.06033672410409999,
                        -0.6960244072223611,
                        0.057541045805265624,
                        0.7131609586709314
                    ],
                    "position": [
                        -0.05315130949020386,
                        0.008254648186266422,
                        0.21154367923736572
                    ]
                },
                "Lure_Slot": {
                    "quaternion": [
                        0.00908637059154546,
                        0.967854726895702,
                        -0.028153459140865082,
                        -0.24976398579710304
                    ],
                    "position": [
                        -0.16498979926109314,
                        -0.01614522933959961,
                        0.1044984757900238
                    ]
                }
            },
            pc: {
                "Bip01": {
                    "quaternion": [
                        0,
                        0.7071086777923478,
                        0,
                        0.7071048845756602
                    ],
                    "position": [
                        0,
                        1.1555180549621582,
                        0
                    ]
                },
                "Bip01_Pelvis": {
                    "quaternion": [
                        -0.499999306600356,
                        -0.4999999999998864,
                        0.5000000000000001,
                        0.500000693399644
                    ],
                    "position": [
                        -0.01347757875919342,
                        0,
                        -1.3016804227918878e-15
                    ]
                },
                "Bip01_Spine": {
                    "quaternion": [
                        -0.000002044852368474467,
                        -0.04758046144325928,
                        6.596225927869744e-7,
                        0.9988674084603171
                    ],
                    "position": [
                        0.12236166000366211,
                        1.8184616613621356e-14,
                        0.00009917411807691678
                    ]
                },
                "Bip01_Spine1": {
                    "quaternion": [
                        -1.976212160463863e-15,
                        0.0043633092635734835,
                        -2.8657958152973944e-15,
                        0.9999904807208269
                    ],
                    "position": [
                        0.12504726648330688,
                        8.740659190626266e-15,
                        0.00011119818373117596
                    ]
                },
                "Bip01_Spine2": {
                    "quaternion": [
                        -4.522000886136495e-14,
                        -0.013089594433019717,
                        -3.229441835397776e-15,
                        0.9999143275889085
                    ],
                    "position": [
                        0.13963103294372559,
                        1.4781131505402223e-14,
                        0.00013848047819919884
                    ]
                },
                "Bip01_Neck": {
                    "quaternion": [
                        -2.216871541010514e-14,
                        0.20364174365806884,
                        5.648207834326029e-7,
                        0.9790454740407084
                    ],
                    "position": [
                        0.17400649189949036,
                        1.1058619060896283e-14,
                        0.00006736921932315454
                    ]
                },
                "Bip01_Head": {
                    "quaternion": [
                        -3.1096072145579656e-14,
                        -0.10492509878910793,
                        -6.602917344414319e-15,
                        0.9944801273248731
                    ],
                    "position": [
                        0.09224729984998703,
                        7.084032999419253e-17,
                        2.9112121602281604e-9
                    ]
                },
                "Bip01_L_Clavicle": {
                    "quaternion": [
                        0.5825909506158887,
                        0.7867394213600487,
                        0.12142214541460476,
                        0.16396808851152284
                    ],
                    "position": [
                        -0.023227695375680923,
                        0.0517645925283432,
                        -0.008319484069943428
                    ]
                },
                "Bip01_L_UpperArm": {
                    "quaternion": [
                        0.052443318415715416,
                        0.04512866492603903,
                        0.11219708085588842,
                        0.9912743903832569
                    ],
                    "position": [
                        0.19742032885551453,
                        8.336144219356356e-8,
                        6.280239439604429e-9
                    ]
                },
                "Bip01_L_Forearm": {
                    "quaternion": [
                        3.6900051308292875e-12,
                        -0.043263280418386035,
                        8.677477723165994e-10,
                        0.9990637059604557
                    ],
                    "position": [
                        0.27822345495224,
                        7.088096332097393e-9,
                        -1.1698733093368219e-9
                    ]
                },
                "Bip01_L_Hand": {
                    "quaternion": [
                        -0.7064961731106392,
                        -0.02157312510559104,
                        0.05241121635734485,
                        0.7054437060989629
                    ],
                    "position": [
                        0.301849365234375,
                        6.895049864397151e-8,
                        5.2723096999329755e-9
                    ]
                },
                "Bip01_L_Finger0": {
                    "quaternion": [
                        -0.0003969314286026759,
                        0.07845908665260293,
                        -0.000031240540935912666,
                        0.9969172549369848
                    ],
                    "position": [
                        0.10968898981809616,
                        2.6214772574917333e-9,
                        -3.887244304223714e-8
                    ]
                },
                "Bip01_L_Finger01": {
                    "quaternion": [
                        3.6566300319570443e-11,
                        0.08715572435743471,
                        -1.392873125568304e-10,
                        0.9961946997006814
                    ],
                    "position": [
                        0.05813423916697502,
                        -1.5710152068137972e-9,
                        7.16295787128729e-8
                    ]
                },
                "Bip01_R_Clavicle": {
                    "quaternion": [
                        -0.5825905001404431,
                        0.786739753709819,
                        -0.12141996756134724,
                        0.16396970878578748
                    ],
                    "position": [
                        -0.023227697238326073,
                        -0.05176455155014992,
                        -0.00831977091729641
                    ]
                },
                "Bip01_R_UpperArm": {
                    "quaternion": [
                        -0.05244334136967267,
                        0.04512858495265755,
                        -0.1121970739426804,
                        0.9912743935734974
                    ],
                    "position": [
                        0.19742028415203094,
                        9.186160276897226e-9,
                        2.3327690890084796e-9
                    ]
                },
                "Bip01_R_Forearm": {
                    "quaternion": [
                        7.823902613870325e-11,
                        -0.043263282272321034,
                        1.5484080951637622e-9,
                        0.9990637058801732
                    ],
                    "position": [
                        0.27822345495224,
                        -1.215926292985614e-8,
                        -1.4741641241045045e-9
                    ]
                },
                "Bip01_R_Hand": {
                    "quaternion": [
                        0.7064961741370105,
                        -0.021573119021604453,
                        -0.052411216751113474,
                        0.7054437059499009
                    ],
                    "position": [
                        0.301849365234375,
                        -5.4884171873936793e-8,
                        -2.641853180662679e-9
                    ]
                },
                "Bip01_R_Finger0": {
                    "quaternion": [
                        0.00039693157503150245,
                        0.07845908665259589,
                        0.00003123998652392057,
                        0.9969172549369475
                    ],
                    "position": [
                        0.10968897491693497,
                        5.314522155686063e-9,
                        7.813854097094008e-8
                    ]
                },
                "Bip01_R_Finger01": {
                    "quaternion": [
                        -5.438638245864924e-11,
                        0.08715572435743471,
                        4.2930144049219615e-10,
                        0.9961946997006814
                    ],
                    "position": [
                        0.05813421681523323,
                        1.0530113447870804e-9,
                        -3.382213620284347e-8
                    ]
                },
                "Bip01_L_Thigh": {
                    "quaternion": [
                        0.02660424780768209,
                        -0.02284582949981274,
                        0.9965856007421581,
                        0.0747490633562231
                    ],
                    "position": [
                        -0.12181702256202698,
                        0.10640960186719894,
                        0.011532487347722054
                    ]
                },
                "Bip01_L_Calf": {
                    "quaternion": [
                        3.200900830625947e-10,
                        -0.09544057472926189,
                        -3.0435136567611625e-9,
                        0.9954351293255368
                    ],
                    "position": [
                        0.5586506724357605,
                        -8.033755882763671e-9,
                        -1.9702171005775426e-9
                    ]
                },
                "Bip01_L_Foot": {
                    "quaternion": [
                        0.03327705575734958,
                        0.07437898005629157,
                        0.07072436171048806,
                        0.9941621947271905
                    ],
                    "position": [
                        0.482758492231369,
                        2.340741378503708e-9,
                        -1.0850036424869813e-9
                    ]
                },
                "Bip01_L_Toe0": {
                    "quaternion": [
                        4.802776655492098e-14,
                        0.7071067811865475,
                        4.802776655492098e-14,
                        0.7071067811865476
                    ],
                    "position": [
                        0.1327415257692337,
                        1.5326476088262098e-8,
                        -0.1859404295682907
                    ]
                },
                "Bip01_R_Thigh": {
                    "quaternion": [
                        0.02660403826406601,
                        0.022842979239467612,
                        0.9965856672453707,
                        -0.074749122245926
                    ],
                    "position": [
                        -0.12181702256202698,
                        -0.10640966892242432,
                        0.011531895026564598
                    ]
                },
                "Bip01_R_Calf": {
                    "quaternion": [
                        -7.967328442858779e-10,
                        -0.09544057472926189,
                        -5.318807923968585e-9,
                        0.9954351293255368
                    ],
                    "position": [
                        0.5586506724357605,
                        -1.2664154169783615e-8,
                        -2.732707393704459e-9
                    ]
                },
                "Bip01_R_Foot": {
                    "quaternion": [
                        -0.03327696898111873,
                        0.074378961850102,
                        -0.070724369248498,
                        0.9941621984763805
                    ],
                    "position": [
                        0.4827585220336914,
                        4.269024245218134e-9,
                        2.208640381695659e-9
                    ]
                },
                "Bip01_R_Toe0": {
                    "quaternion": [
                        4.7433845349968676e-14,
                        0.7071067811865475,
                        -6.59097770692812e-14,
                        0.7071067811865476
                    ],
                    "position": [
                        0.1327415406703949,
                        -1.1083573170367345e-8,
                        -0.1859404295682907
                    ]
                }
            }
        },
        mh2: {
            pc: {
                "Bip01": {
                    "quaternion": [
                        0,
                        0.7071087199390368,
                        0,
                        0.7071048424287426
                    ],
                    "position": [
                        -6.656362216972411e-8,
                        1.0176219940185547,
                        0.0015979651361703873
                    ]
                },
                "Bip01_Pelvis": {
                    "quaternion": [
                        -0.5138881503326455,
                        -0.48571425022943526,
                        0.4857141358727305,
                        0.5138895712696742
                    ],
                    "position": [
                        -0.01188003458082676,
                        0,
                        4.704233669272639e-10
                    ]
                },
                "Bip01_R_Thigh": {
                    "quaternion": [
                        -0.020144533425594996,
                        0.026511740773246768,
                        0.997899560891471,
                        -0.055567902128603464
                    ],
                    "position": [
                        1.2946715344241966e-7,
                        -0.09379999339580536,
                        1.7320036249657278e-7
                    ]
                },
                "Bip01_R_Calf": {
                    "quaternion": [
                        -7.636999760662685e-10,
                        -0.056479308012756246,
                        2.1800237624757115e-8,
                        0.9984037699079464
                    ],
                    "position": [
                        0.49244898557662964,
                        1.2362205481508681e-8,
                        -1.6295589322368187e-9
                    ]
                },
                "Bip01_R_Foot": {
                    "quaternion": [
                        0.07599171251276333,
                        0.05855803668208489,
                        -0.0625370999685145,
                        0.9934210220806642
                    ],
                    "position": [
                        0.42555004358291626,
                        -1.2676008687151352e-8,
                        -8.683770147399628e-9
                    ]
                },
                "Bip01_R_Toe0": {
                    "quaternion": [
                        -0.021035014870537425,
                        0.7065284163039547,
                        -0.021330592455742408,
                        0.7070503029772733
                    ],
                    "position": [
                        0.11701200902462006,
                        -3.6582590290379358e-9,
                        -0.16390497982501984
                    ]
                },
                "Bip01_L_Thigh": {
                    "quaternion": [
                        -0.02014456253542817,
                        -0.0265103975650054,
                        0.9978996898518727,
                        0.05556621652434389
                    ],
                    "position": [
                        -1.6160120708264003e-7,
                        0.09379999339580536,
                        -8.824224551062798e-8
                    ]
                },
                "Bip01_L_Calf": {
                    "quaternion": [
                        2.440511266561664e-9,
                        -0.05647930062152587,
                        -1.0401639453556406e-8,
                        0.9984037703260655
                    ],
                    "position": [
                        0.492449015378952,
                        -2.7611648079073348e-8,
                        -2.1174850761696007e-9
                    ]
                },
                "Bip01_L_Foot": {
                    "quaternion": [
                        -0.07599173498758706,
                        0.05855804069344515,
                        0.06253701640436789,
                        0.9934210253884855
                    ],
                    "position": [
                        0.4255499541759491,
                        -9.767719078013215e-9,
                        6.006862118823619e-9
                    ]
                },
                "Bip01_L_Toe0": {
                    "quaternion": [
                        0.021035020114795043,
                        0.7065284162450327,
                        0.021330604895642216,
                        0.7070503024078613
                    ],
                    "position": [
                        0.11701200902462006,
                        3.4428995210333824e-9,
                        -0.16390500962734222
                    ]
                },
                "Left_Weapon_Slot": {
                    "quaternion": [
                        0.7794896301614416,
                        0.6221374823047482,
                        0.0419772089492065,
                        -0.059822937321005874
                    ],
                    "position": [
                        0.008254465647041798,
                        0.19834154844284058,
                        -0.03603213280439377
                    ]
                },
                "Right_Weapon_Slot": {
                    "quaternion": [
                        0.007170020705264454,
                        0.009965659950210903,
                        -0.645653247560273,
                        0.7635320296621787
                    ],
                    "position": [
                        0.008254880085587502,
                        -0.21154361963272095,
                        0.04127100110054016
                    ]
                },
                "Lure_Slot": {
                    "quaternion": [
                        -0.34951209270073635,
                        -0.36857956667249475,
                        -0.5901888065820966,
                        0.6274293621087695
                    ],
                    "position": [
                        -0.016145069152116776,
                        -0.10449828952550888,
                        0.1531093567609787
                    ]
                },
                "Bip01_Spine": {
                    "quaternion": [
                        -0.5001996803874776,
                        -0.4998016250932634,
                        0.49980025474368456,
                        0.50019832492129
                    ],
                    "position": [
                        -0.011967855505645275,
                        0.10786998271942139,
                        4.736124825654997e-10
                    ]
                },
                "Bip01_Spine1": {
                    "quaternion": [
                        0,
                        -2.6871508490566853e-12,
                        -4.440892098500626e-16,
                        1
                    ],
                    "position": [
                        0.11022797226905823,
                        2.335172277767583e-9,
                        0.00009801118721952662
                    ]
                },
                "Bip01_Spine2": {
                    "quaternion": [
                        0,
                        -2.6871508490566853e-12,
                        -4.440892098500626e-16,
                        1
                    ],
                    "position": [
                        0.12308797240257263,
                        2.5724735674970134e-9,
                        0.00012211716966703534
                    ]
                },
                "Bip01_Neck": {
                    "quaternion": [
                        -4.1244953528901227e-7,
                        0.1635603603766838,
                        8.65029426597327e-7,
                        0.9865333286374723
                    ],
                    "position": [
                        0.1533808410167694,
                        3.518928037848923e-9,
                        0.00006129287066869438
                    ]
                },
                "Bip01_Head": {
                    "quaternion": [
                        4.2569189602883474e-7,
                        -0.12076899123841375,
                        -7.008595166390829e-7,
                        0.9926806388534952
                    ],
                    "position": [
                        0.08131495118141174,
                        1.3946768184780467e-9,
                        -1.1551445133761717e-8
                    ]
                },
                "Back_Weapon_Slot": {
                    "quaternion": [
                        -0.03980752588863856,
                        0.0398057344412579,
                        -0.7059851857364638,
                        0.7059856810064531
                    ],
                    "position": [
                        0.08832502365112305,
                        -0.019381659105420113,
                        0.15300975739955902
                    ]
                },
                "Bip01_L_Clavicle": {
                    "quaternion": [
                        0.6644043958132367,
                        0.7473731600021396,
                        0.00026557692434642195,
                        0.0002966502190066807
                    ],
                    "position": [
                        0.13168467581272125,
                        0.04563099518418312,
                        0.001497867051512003
                    ]
                },
                "Bip01_L_UpperArm": {
                    "quaternion": [
                        0.01179497394849521,
                        -0.009098073165800394,
                        -0.21320812877282505,
                        0.9768932375032595
                    ],
                    "position": [
                        0.17402499914169312,
                        1.118800767585526e-7,
                        -2.977313534602288e-11
                    ]
                },
                "Bip01_L_Forearm": {
                    "quaternion": [
                        2.6312459263721995e-9,
                        -0.13407195355155566,
                        3.7730241375516144e-8,
                        0.9909715996288027
                    ],
                    "position": [
                        0.24525299668312073,
                        6.119138085125542e-9,
                        -1.0509482173404194e-11
                    ]
                },
                "Bip01_L_Hand": {
                    "quaternion": [
                        -0.7040837426592993,
                        -0.049278729959433165,
                        -0.0028349627387011084,
                        0.7083993599388682
                    ],
                    "position": [
                        0.26607903838157654,
                        -2.4931310349529667e-8,
                        -1.3661664688413566e-8
                    ]
                },
                "Bip01_L_Finger0": {
                    "quaternion": [
                        0.7230194827298162,
                        0.16562550209293755,
                        -0.06600223665224456,
                        0.667423948072256
                    ],
                    "position": [
                        0.02847190387547016,
                        -0.04098433628678322,
                        -0.028657017275691032
                    ]
                },
                "Bip01_L_Finger01": {
                    "quaternion": [
                        7.870030071374303e-9,
                        0.14128301743747348,
                        3.2759212068375455e-8,
                        0.9899692464838297
                    ],
                    "position": [
                        0.05888017266988754,
                        -1.3312581259583567e-8,
                        -6.245274519756094e-9
                    ]
                },
                "Bip01_L_Finger1": {
                    "quaternion": [
                        0.05685244057530219,
                        0.23798723781993875,
                        0.0753182967708685,
                        0.9666731758728195
                    ],
                    "position": [
                        0.09476707875728607,
                        -0.02568550780415535,
                        0.005942587740719318
                    ]
                },
                "Bip01_L_Finger11": {
                    "quaternion": [
                        1.745608921661427e-8,
                        0.14822378406671488,
                        7.491282434767033e-9,
                        0.9889538461611561
                    ],
                    "position": [
                        0.039676371961832047,
                        2.7691622328518406e-9,
                        -4.652542529015591e-8
                    ]
                },
                "Bip01_L_Finger2": {
                    "quaternion": [
                        0.01019514985865467,
                        0.15546283486729706,
                        0.062493615426582494,
                        0.9858102829342937
                    ],
                    "position": [
                        0.0970270112156868,
                        0.0284542478621006,
                        0.0018093324033543468
                    ]
                },
                "Bip01_L_Finger21": {
                    "quaternion": [
                        3.0174256184193665e-8,
                        0.3375332811848131,
                        2.73866161814895e-8,
                        0.9413135949791717
                    ],
                    "position": [
                        0.04329114407300949,
                        1.584082021111044e-8,
                        3.3856082382044406e-8
                    ]
                },
                "Bip01_R_Clavicle": {
                    "quaternion": [
                        -0.6644043958132414,
                        0.7473731600021285,
                        -0.0002635040100482386,
                        0.000298493066947079
                    ],
                    "position": [
                        0.13168467581272125,
                        -0.04563099890947342,
                        0.0014976139646023512
                    ]
                },
                "Bip01_R_UpperArm": {
                    "quaternion": [
                        -0.011794973644604027,
                        -0.009098072276827298,
                        0.2132080901695574,
                        0.9768932459387257
                    ],
                    "position": [
                        0.17402498424053192,
                        -9.394599231882239e-8,
                        -4.835666866931376e-10
                    ]
                },
                "Bip01_R_Forearm": {
                    "quaternion": [
                        5.318995075725076e-9,
                        -0.13407195355155577,
                        1.5596927912815803e-9,
                        0.9909715996288033
                    ],
                    "position": [
                        0.24525295197963715,
                        -1.6784479583975553e-8,
                        2.752986505427657e-9
                    ]
                },
                "Bip01_R_Hand": {
                    "quaternion": [
                        0.704083679218986,
                        -0.04927871508741106,
                        0.0028349729188203543,
                        0.708399423881648
                    ],
                    "position": [
                        0.2660790681838989,
                        -2.4284133814944653e-8,
                        -1.5879365378168586e-8
                    ]
                },
                "Bip01_R_Finger0": {
                    "quaternion": [
                        -0.723019444475178,
                        0.16562542752321538,
                        0.06600221952457601,
                        0.6674240126469406
                    ],
                    "position": [
                        0.02847190387547016,
                        0.04098433628678322,
                        -0.028657056391239166
                    ]
                },
                "Bip01_R_Finger01": {
                    "quaternion": [
                        -2.850286026937388e-9,
                        0.1412830174374735,
                        1.2534351918839384e-9,
                        0.9899692464838303
                    ],
                    "position": [
                        0.05888015404343605,
                        2.231742612934795e-8,
                        -3.441497087308676e-9
                    ]
                },
                "Bip01_R_Finger1": {
                    "quaternion": [
                        -0.05685238311876229,
                        0.23798723911267575,
                        -0.07531826314024338,
                        0.9666731814769035
                    ],
                    "position": [
                        0.09476706385612488,
                        0.025685513392090797,
                        0.0059425439685583115
                    ]
                },
                "Bip01_R_Finger11": {
                    "quaternion": [
                        2.774585534929967e-9,
                        0.14822374724793774,
                        -4.805408195434735e-9,
                        0.9889538516795309
                    ],
                    "position": [
                        0.03967634588479996,
                        -3.034108075894437e-9,
                        -7.425195747146063e-8
                    ]
                },
                "Bip01_R_Finger2": {
                    "quaternion": [
                        -0.010195063953295853,
                        0.1554628028811702,
                        -0.062493567353672196,
                        0.9858102919040072
                    ],
                    "position": [
                        0.09702702611684799,
                        -0.028454255312681198,
                        0.0018092988757416606
                    ]
                },
                "Bip01_R_Finger21": {
                    "quaternion": [
                        -1.2748714196623373e-8,
                        0.3375332811848127,
                        -5.635322943586463e-8,
                        0.9413135949791711
                    ],
                    "position": [
                        0.04329109936952591,
                        -1.833850404864279e-9,
                        -8.519673144746776e-8
                    ]
                },
                "STRAP1": {
                    "quaternion": [
                        -0.000479156402392299,
                        -0.0014118412106217673,
                        -0.00005235617250608431,
                        0.9999988871855654
                    ],
                    "position": [
                        0.013623404316604137,
                        0.011845149099826813,
                        0.16594693064689636
                    ]
                },
                "STRAP2": {
                    "quaternion": [
                        -1.65313940314604e-9,
                        4.566193112509594e-8,
                        2.9014611158117927e-8,
                        0.9999999999999984
                    ],
                    "position": [
                        0.019648943096399307,
                        -0.08296016603708267,
                        0.14283044636249542
                    ]
                },
                "Leo_L0": {
                    "quaternion": [
                        0,
                        0,
                        0,
                        1
                    ],
                    "position": [
                        -0.0002589244395494461,
                        0.0027858030516654253,
                        -0.005229692906141281
                    ]
                },
                "weapstrap": {
                    "quaternion": [
                        0,
                        0,
                        0,
                        1
                    ],
                    "position": [
                        0,
                        0.0027858030516654253,
                        -0.005229692906141281
                    ]
                }
            },
            psp_001: {
                "null": {
                    "quaternion": [
                        0,
                        0,
                        0,
                        1
                    ],
                    "position": [
                        0,
                        0.0027858030516654253,
                        -0.005229692906141281
                    ]
                },
                "Bip01": {
                    "quaternion": [
                        0,
                        0.7071087199390368,
                        0,
                        0.7071048424287426
                    ],
                    "position": [
                        -2.2410965444530362e-11,
                        0.9776219725608826,
                        0.0016040001064538956
                    ]
                },
                "Bip01_Pelvis": {
                    "quaternion": [
                        -0.49981455103868627,
                        -0.5001846062016168,
                        0.500184829637365,
                        0.4998158916589572
                    ],
                    "position": [
                        -0.000003999914042651653,
                        0,
                        1.5769728730317956e-13
                    ]
                },
                "Bip01_Spine": {
                    "quaternion": [
                        -0.0000021622299451319333,
                        0.0007676188871754702,
                        5.45716823897964e-7,
                        0.9999997053780922
                    ],
                    "position": [
                        0.1078702062368393,
                        1.2015726724712295e-7,
                        0.0000173726166394772
                    ]
                },
                "Bip01_Spine1": {
                    "quaternion": [
                        0,
                        -2.6871508490566853e-12,
                        -4.440892098500626e-16,
                        1
                    ],
                    "position": [
                        0.12186998128890991,
                        2.5818087667772716e-9,
                        0.00010836339788511395
                    ]
                },
                "Bip01_Spine2": {
                    "quaternion": [
                        0,
                        -2.6871508490566853e-12,
                        -4.440892098500626e-16,
                        1
                    ],
                    "position": [
                        0.13608777523040771,
                        2.844160018611319e-9,
                        0.00013501383364200592
                    ]
                },
                "Bip01_Neck": {
                    "quaternion": [
                        -4.1244953528901227e-7,
                        0.1635603603766838,
                        8.65029426597327e-7,
                        0.9865333286374723
                    ],
                    "position": [
                        0.20599816739559174,
                        -1.5881653769866944e-9,
                        0.002351293107494712
                    ]
                },
                "Bip01_Head": {
                    "quaternion": [
                        4.2569189602883474e-7,
                        -0.12076899123841375,
                        -7.008595166390829e-7,
                        0.9926806388534952
                    ],
                    "position": [
                        0.08131500333547592,
                        1.394544146826604e-9,
                        1.6947204528605653e-8
                    ]
                },
                "Back_Weapon_Slot": {
                    "quaternion": [
                        -0.03980751699850791,
                        0.03980572583190871,
                        -0.7059851909508679,
                        0.7059856766761632
                    ],
                    "position": [
                        0.08832505345344543,
                        -0.019381655380129814,
                        0.15300974249839783
                    ]
                },
                "Bip01_L_Clavicle": {
                    "quaternion": [
                        0.7071067040633977,
                        0.7071067462102477,
                        0.0002825215808114726,
                        0.0002805603670157886
                    ],
                    "position": [
                        0.12717384099960327,
                        0.041471995413303375,
                        0.0014813670422881842
                    ]
                },
                "Bip01_L_UpperArm": {
                    "quaternion": [
                        0.011191425792871072,
                        -0.012124754536249486,
                        -0.26171088396531317,
                        0.965005261920341
                    ],
                    "position": [
                        0.153220996260643,
                        8.783375804455318e-9,
                        6.512222011645363e-11
                    ]
                },
                "Bip01_L_Forearm": {
                    "quaternion": [
                        -2.7857343951104455e-9,
                        -0.1295090941662843,
                        -1.8384088001810595e-8,
                        0.9915782341944726
                    ],
                    "position": [
                        0.2796400189399719,
                        -9.289158953151855e-8,
                        3.959869931957627e-11
                    ]
                },
                "Bip01_L_Hand": {
                    "quaternion": [
                        -0.7040837421450543,
                        -0.04927874951731989,
                        -0.0028349664932148136,
                        0.7083993593995533
                    ],
                    "position": [
                        0.24359096586704254,
                        4.032095546335768e-8,
                        -3.6175853423969784e-9
                    ]
                },
                "Bip01_L_Finger0": {
                    "quaternion": [
                        0.7169750850465717,
                        0.10972537285577874,
                        -0.12654360620519578,
                        0.6766784928237165
                    ],
                    "position": [
                        0.01373501680791378,
                        -0.03143154829740524,
                        -0.01700994372367859
                    ]
                },
                "Bip01_L_Finger01": {
                    "quaternion": [
                        -5.469494631326257e-9,
                        0.047698894420942876,
                        1.0782058672625405e-8,
                        0.998861759940293
                    ],
                    "position": [
                        0.07852007448673248,
                        -5.9389467566006715e-8,
                        -2.046610703132501e-8
                    ]
                },
                "Bip01_L_Finger1": {
                    "quaternion": [
                        0.04173970118961749,
                        0.20504601001651993,
                        -0.013469490920974336,
                        0.9777691465339042
                    ],
                    "position": [
                        0.09368796646595001,
                        -0.018300693482160568,
                        0.0066755954176187515
                    ]
                },
                "Bip01_L_Finger11": {
                    "quaternion": [
                        -8.973277440459936e-9,
                        0.21366782005106,
                        4.4841743918010834e-8,
                        0.9769063735459124
                    ],
                    "position": [
                        0.039676036685705185,
                        1.7914203453983646e-9,
                        -7.395583168090525e-8
                    ]
                },
                "Bip01_L_Finger2": {
                    "quaternion": [
                        -0.04220289172098643,
                        0.1562816201694482,
                        0.0626833739466861,
                        0.9848176307323879
                    ],
                    "position": [
                        0.09230401366949081,
                        0.02058444544672966,
                        0.009328567422926426
                    ]
                },
                "Bip01_L_Finger21": {
                    "quaternion": [
                        -1.7621291615875554e-8,
                        0.40560489238869907,
                        -7.000680992282559e-9,
                        0.9140485059723864
                    ],
                    "position": [
                        0.04329102486371994,
                        1.999505627736653e-8,
                        -5.723362050957803e-8
                    ]
                },
                "Bip01_R_Clavicle": {
                    "quaternion": [
                        -0.7071067040633812,
                        0.7071067462102477,
                        -0.00028056034271610074,
                        0.000282521615555144
                    ],
                    "position": [
                        0.12717384099960327,
                        -0.041471999138593674,
                        0.0014811368891969323
                    ]
                },
                "Bip01_R_UpperArm": {
                    "quaternion": [
                        -0.011191425106618528,
                        -0.012124752837961062,
                        0.26171092332985074,
                        0.965005251274192
                    ],
                    "position": [
                        0.153220996260643,
                        -8.78327988118599e-9,
                        2.202324780875564e-11
                    ]
                },
                "Bip01_R_Forearm": {
                    "quaternion": [
                        -4.505268355339879e-9,
                        -0.12950910844629823,
                        1.2613786104987758e-8,
                        0.9915782323293733
                    ],
                    "position": [
                        0.2796400189399719,
                        6.5276857696972e-8,
                        -3.0959784735884455e-10
                    ]
                },
                "Bip01_R_Hand": {
                    "quaternion": [
                        0.7040837421127211,
                        -0.04927874036441394,
                        0.002834941778729403,
                        0.7083993598652542
                    ],
                    "position": [
                        0.24359096586704254,
                        -4.574587109118511e-8,
                        -1.0274703754475922e-8
                    ]
                },
                "Bip01_R_Finger0": {
                    "quaternion": [
                        -0.7169750896183542,
                        0.10972538906892086,
                        0.12654361276838563,
                        0.6766784881670318
                    ],
                    "position": [
                        0.01373498234897852,
                        0.03143155574798584,
                        -0.01700996607542038
                    ]
                },
                "Bip01_R_Finger01": {
                    "quaternion": [
                        -7.420160619255954e-9,
                        0.04769888047198251,
                        -1.337620411525723e-8,
                        0.9988617606064011
                    ],
                    "position": [
                        0.07852007448673248,
                        -3.804065684676061e-8,
                        -1.2761234735592097e-8
                    ]
                },
                "Bip01_R_Finger1": {
                    "quaternion": [
                        -0.04173967735211468,
                        0.20504599105855764,
                        0.013469475213002513,
                        0.9777691517428012
                    ],
                    "position": [
                        0.0936879813671112,
                        0.01830068603157997,
                        0.006675598211586475
                    ]
                },
                "Bip01_R_Finger11": {
                    "quaternion": [
                        -5.76703929756948e-8,
                        0.2136678465067932,
                        -7.524360294002678e-9,
                        0.9769063677595443
                    ],
                    "position": [
                        0.03967604413628578,
                        -7.132037183055218e-9,
                        3.5246149110435e-8
                    ]
                },
                "Bip01_R_Finger2": {
                    "quaternion": [
                        0.04220287547993173,
                        0.15628164850029377,
                        -0.06268335111848213,
                        0.9848176283650694
                    ],
                    "position": [
                        0.0923040360212326,
                        -0.020584451034665108,
                        0.009328572079539299
                    ]
                },
                "Bip01_R_Finger21": {
                    "quaternion": [
                        1.0090359563737671e-8,
                        0.40560489238869923,
                        -6.598556706195312e-9,
                        0.9140485059723864
                    ],
                    "position": [
                        0.043291013687849045,
                        -1.666100679642568e-8,
                        3.639213730366464e-8
                    ]
                },
                "Bip01_L_Thigh": {
                    "quaternion": [
                        0.008347718214712526,
                        -0.0249134216127188,
                        0.9980680703274373,
                        0.05630065732662962
                    ],
                    "position": [
                        -1.5930930885588168e-7,
                        0.09379999339580536,
                        -8.728912348487938e-8
                    ]
                },
                "Bip01_L_Calf": {
                    "quaternion": [
                        2.130436925236926e-9,
                        -0.056479296925910624,
                        3.884221964789274e-8,
                        0.9984037705351243
                    ],
                    "position": [
                        0.4659220278263092,
                        5.118903345646686e-8,
                        -1.6172582162354843e-9
                    ]
                },
                "Bip01_L_Foot": {
                    "quaternion": [
                        -0.05827688730858062,
                        0.0596629767591073,
                        0.06148337440722885,
                        0.9946174783675985
                    ],
                    "position": [
                        0.40262696146965027,
                        9.959401303660798e-9,
                        9.112022247848017e-10
                    ]
                },
                "Bip01_L_Toe0": {
                    "quaternion": [
                        0.02103498462746592,
                        0.7065284173485818,
                        0.021330578694871205,
                        0.7070503031896754
                    ],
                    "position": [
                        0.0777679979801178,
                        -0.00033100522705353796,
                        -0.15136802196502686
                    ]
                },
                "Bip01_R_Thigh": {
                    "quaternion": [
                        0.008347775322699442,
                        0.024914977281899682,
                        0.9980679682782886,
                        -0.05630176953303522
                    ],
                    "position": [
                        1.6517182643838169e-7,
                        -0.09379999339580536,
                        1.7276244079766911e-7
                    ]
                },
                "Bip01_R_Calf": {
                    "quaternion": [
                        1.0482701732200531e-9,
                        -0.056479289534680226,
                        2.718944096411589e-8,
                        0.9984037709532436
                    ],
                    "position": [
                        0.46592196822166443,
                        3.598970721441219e-8,
                        -1.8681920455065892e-9
                    ]
                },
                "Bip01_R_Foot": {
                    "quaternion": [
                        0.05827688863825163,
                        0.059662961491840145,
                        -0.06148349657031572,
                        0.9946174716521329
                    ],
                    "position": [
                        0.40262702107429504,
                        -4.796647967708623e-9,
                        7.341673491367828e-9
                    ]
                },
                "Bip01_R_Toe0": {
                    "quaternion": [
                        -0.02103500831238424,
                        0.7065284170755342,
                        -0.0213305734010097,
                        0.7070503029170648
                    ],
                    "position": [
                        0.0777679979801178,
                        0.0003310019674245268,
                        -0.15136799216270447
                    ]
                },
                "Left_Weapon_Slot": {
                    "quaternion": [
                        0.08759931252754008,
                        0.7517139762783547,
                        0.06975375871091652,
                        0.6499129686165541
                    ],
                    "position": [
                        0.024151267483830452,
                        0.008254766464233398,
                        -0.19834156334400177
                    ]
                },
                "Right_Weapon_Slot": {
                    "quaternion": [
                        -0.06033671489931603,
                        -0.6960243537763559,
                        0.05754106028233366,
                        0.7131609954635882
                    ],
                    "position": [
                        -0.05315130576491356,
                        0.008254647254943848,
                        0.21154366433620453
                    ]
                },
                "Lure_Slot": {
                    "quaternion": [
                        0.009086363699278335,
                        0.9678547225471354,
                        -0.028153447783852523,
                        -0.24976400346326935
                    ],
                    "position": [
                        -0.16498978435993195,
                        -0.01614522933959961,
                        0.1044984683394432
                    ]
                }
            }
        }
    }

    /**
     * Entfernt aus dem targetSkinnedMesh alle Bones (und zugehörige Inversen sowie Skin‑Attribute),
     * die zusätzlich vorhanden sind im Vergleich zum sourceSkinnedMesh.
     *
     * @param {SkinnedMesh} sourceSkinnedMesh - SkinnedMesh, dessen Skeleton als Referenz dient
     * @param {SkinnedMesh} targetSkinnedMesh - SkinnedMesh, das angepasst werden soll
     */
    removeAdditionalBones(sourceSkinnedMesh, targetSkinnedMesh) {
        const sourceSkeleton = sourceSkinnedMesh.skeleton;
        const targetSkeleton = targetSkinnedMesh.skeleton;

        // Erstelle eine Menge der Bone-Namen aus dem sourceSkeleton
        const sourceBoneNames = new Set(sourceSkeleton.bones.map(bone => bone.userData.boneId));

        // Neue Arrays für Bones und Inversen sowie Mapping: alter Index -> neuer Index
        const newBones = [];
        const newBoneInverses = [];
        const indexMapping = {}; // { [alterIndex]: neuerIndex }

        // Iteriere über alle Bones im targetSkeleton
        targetSkeleton.bones.forEach((bone, oldIndex) => {
            if (sourceBoneNames.has(bone.userData.boneId)) {
                // Bone ist im Source vorhanden → übernehmen
                indexMapping[oldIndex] = newBones.length;
                newBones.push(bone);

                // Falls boneInverses vorhanden sind, auch übernehmen
                if (targetSkeleton.boneInverses && targetSkeleton.boneInverses.length > oldIndex) {
                    newBoneInverses.push(targetSkeleton.boneInverses[oldIndex]);
                }
            } else {
                // Bone ist zusätzlich → entferne ihn aus der Hierarchie
                if (bone.parent) {
                    bone.parent.remove(bone);
                }
                // Optional: Falls der Bone eigene Children hat, diese an den Parent anhängen
                if (bone.children.length > 0 && bone.parent) {
                    bone.children.forEach(child => {
                        bone.parent.add(child);
                    });
                }
                console.log(`Bone "${bone.name}/${bone.userData.boneId}" wurde entfernt.`);
            }
        });

        // Aktualisiere das Bones-Array und ggf. die Inversen im targetSkeleton
        targetSkeleton.bones = newBones;
        if (targetSkeleton.boneInverses) {
            targetSkeleton.boneInverses = newBoneInverses;
        }

        // Aktualisiere die Skin-Indizes im Geometry-Attribut des targetSkinnedMesh
        const geometry = targetSkinnedMesh.geometry;
        if (geometry && geometry.attributes.skinIndex) {
            const skinIndexAttr = geometry.attributes.skinIndex;
            const skinIndices = skinIndexAttr.array;

            // Übersetze jeden alten Bone-Index in den neuen
            for (let i = 0; i < skinIndices.length; i++) {
                const oldBoneIndex = skinIndices[i];
                skinIndices[i] = indexMapping.hasOwnProperty(oldBoneIndex) ? indexMapping[oldBoneIndex] : 0;
            }
            skinIndexAttr.needsUpdate = true;
        }

        // Normalisiere die Skin-Weights, sodass die Summe pro Vertex 1 ergibt.
        if (geometry && geometry.attributes.skinWeight) {
            const skinWeightAttr = geometry.attributes.skinWeight;
            const skinWeights = skinWeightAttr.array;
            const vertexCount = skinWeightAttr.count;   // Anzahl der Vertices
            const itemSize = skinWeightAttr.itemSize;     // typischerweise 4

            for (let i = 0; i < vertexCount; i++) {
                let sum = 0;
                for (let j = 0; j < itemSize; j++) {
                    sum += skinWeights[i * itemSize + j];
                }
                if (sum > 0) {
                    for (let j = 0; j < itemSize; j++) {
                        skinWeights[i * itemSize + j] /= sum;
                    }
                }
            }
            skinWeightAttr.needsUpdate = true;
        }

        // targetSkinnedMesh.bind(targetSkeleton);

    }


    getBoneNameByBoneId(boneId, game = "mh2"){
        for(let i in this.bones[game]){
            if (parseInt(this.bones[game][i]) === parseInt(boneId)) return i;
        }

        return null;
    }

    /**
     *
     * @param mesh
     * @param {BufferGeometry} geometry
     * @return {{
     *                 vertex: Vector3,
     *                 weight: Vector4,
     *                 skinIndices: Vector4,
     *                 normal: Vector3,
     *                 color: Color,
     *                 tu: int,
     *                 tv: int,
     *                 tu2: int,
     *                 tv2: int,
     *             }[]}
     */
    decomposeMesh(mesh, geometry, meshBone) {

        // const meshBone = this.getMeshBone(mesh);

        const positionAttribute = geometry.attributes.position;
        const normalAttribute = geometry.attributes.normal;
        const uvAttribute = geometry.attributes.uv;
        const uv2Attribute = geometry.attributes.uv2;
        const weightAttribute = geometry.attributes.skinWeight;
        const skinIndicesAttribute = geometry.attributes.skinIndex;
        const colorAttribute = geometry.attributes.color;

        const count = positionAttribute.count;
        const result = [];

        for (let i = 0; i < count; i++) {
            const vertex = new Vector3().fromBufferAttribute(positionAttribute, i);

            if (meshBone !== null){
                vertex.applyMatrix4(new Matrix4().getInverse(meshBone.matrix));
            }

            // Extrahiere den Normalenvektor
            const normal = new Vector3().fromBufferAttribute(normalAttribute, i);

            // Extrahiere das Gewicht (falls vorhanden)
            const weight = weightAttribute
                ? new Vector4().fromBufferAttribute(weightAttribute, i)
                : new Vector4(0, 0, 0, 0);

            const color = colorAttribute
                ? new Color().fromBufferAttribute(colorAttribute, i)
                : new Color(1, 1, 1); // Standardfarbe Weiß

            const skinIndices = skinIndicesAttribute
                ? new Vector4().fromBufferAttribute(skinIndicesAttribute, i)
                : new Vector4(0, 0, 0, 0);

            // Extrahiere die ersten UV-Koordinaten (falls vorhanden)
            const uv = uvAttribute
                ? new Vector2().fromBufferAttribute(uvAttribute, i)
                : new Vector2(0, 0);

            // Extrahiere die zweiten UV-Koordinaten (falls vorhanden)
            const uv2 = uv2Attribute
                ? new Vector2().fromBufferAttribute(uv2Attribute, i)
                : new Vector2(0, 0);

            result.push({
                vertex: vertex,
                weight: weight,
                skinIndices: skinIndices,
                normal: normal,
                color: color,
                tu: uv.x,
                tv: uv.y,
                tu2: uv2.x,
                tv2: uv2.y
            });
        }

        return result;
    }

    getMeshBone(mesh){
        if (mesh.skeleton === undefined)
            return null;

        for(let b in mesh.skeleton.bones){
            if (mesh.skeleton.bones[b].userData.meshBone === true)
                return mesh.skeleton.bones[b];
        }

        return null;
    }

    /**
     *
     * @param boneName
     * @param quat
     * @param {{ game: string, platform: string, version: string, isCutscene: boolean }} source
     * @param {{ game: string, platform: string, version: string, isCutscene: boolean }} target
     */
    fixQuaternion( boneName, quat, source, target){
        // if (boneName === "Bip01_Spine") return;
        // if (
        //     boneName !== "Bip01_Spine" &&
        //     boneName !== "Bip01_R_Calf" &&
        //     boneName !== "Bip01_Pelvis" &&
        //     boneName !== "Bip01_L_Calf" &&
        //     boneName !== "Bip01_L_Clavicle" &&
        //     boneName !== "Bip01_R_Clavicle"
        // ) return;

        if (source.game === "mh2" && source.version === "001"){
            source = {...source};
            source.platform = "psp_001";
        }

        if (target.game === "mh2" && target.version === "001"){
            target = {...target};
            target.platform = "psp_001";
        }


        if (this.matrices[source.game] === undefined){
            console.error(`[ManhuntMatrix] Unsupported source game ${source.game} provided `);
            return;
        }

        if (this.matrices[source.game][source.platform] === undefined){
            console.error(`[ManhuntMatrix] Unsupported source platform ${source.game}=>${source.platform} provided `);
            return;
        }

        if (this.matrices[target.game] === undefined){
            console.error(`[ManhuntMatrix] Unsupported target ${target.game} provided `);
            return;
        }

        if (this.matrices[target.game][target.platform] === undefined){
            console.error(`[ManhuntMatrix] Unsupported target platform ${target.game}=>${target.platform} provided `);
            return;
        }

        let fromMatrix = this.matrices[source.game][source.platform][boneName];
        const toMatrix = this.matrices[target.game][target.platform][boneName];

        // fromMatrix = this.matrices.mh2.psp_001;

        if (toMatrix === undefined) {
            console.info(`[ManhuntMatrix] Matrix for ${target.game}=>${target.platform}=>${boneName} is not available. `);
            return;
        }

        const inverse = (new Quaternion()).fromArray(fromMatrix.quaternion).inverse();
        const difference = inverse.multiply((new Quaternion()).fromArray(toMatrix.quaternion));
        difference.normalize();
        quat.multiply(difference);
    }


    /**
     *
     * @param boneName
     * @param pos
     * @param {{ game: string, platform: string, version: string, isCutscene: boolean }} source
     * @param {{ game: string, platform: string, version: string, isCutscene: boolean }} target
     */
    fixPosition( boneName, pos, source, target){

        // if (
        //     boneName !== "Bip01_Spine" &&
        //     boneName !== "Bip01_R_Calf" &&
        //     boneName !== "Bip01_Pelvis" &&
        //     boneName !== "Bip01_L_Calf" &&
        //     boneName !== "Bip01_L_Clavicle" &&
        //     boneName !== "Bip01_R_Clavicle"
        // ) return;

        if (source.game === "mh2" && source.version === "001"){
            source = {...source};
            source.platform = "psp_001";
        }

        if (target.game === "mh2" && target.version === "001"){
            target = {...target};
            target.platform = "psp_001";
        }


        if (this.matrices[source.game] === undefined){
            console.error(`[ManhuntMatrix] Unsupported source game ${source.game} provided `);
            return;
        }

        if (this.matrices[source.game][source.platform] === undefined){
            console.error(`[ManhuntMatrix] Unsupported source platform ${source.game}=>${source.platform} provided `);
            return;
        }

        if (this.matrices[target.game] === undefined){
            console.error(`[ManhuntMatrix] Unsupported target ${target.game} provided `);
            return;
        }

        if (this.matrices[target.game][target.platform] === undefined){
            console.error(`[ManhuntMatrix] Unsupported target platform ${target.game}=>${target.platform} provided `);
            return;
        }


        const fromMatrix = this.matrices[source.game][source.platform][boneName];
        const toMatrix = this.matrices[target.game][target.platform][boneName];
        const difference = (new Vector3()).fromArray(toMatrix.position).sub((new Vector3()).fromArray(fromMatrix.position))

        pos.add(difference);
    }

    /**
     * @deprecated
     * @param sourceSkeleton
     * @param targetSkeleton
     */
    correctBoneTransforms(sourceSkeleton, targetSkeleton) {
        sourceSkeleton.pose();
        targetSkeleton.pose();

        sourceSkeleton.bones.forEach((bone) => bone.updateMatrixWorld(true));

        const boneMap = {};
        sourceSkeleton.bones.forEach((sourceBone) => {
            const targetBone = targetSkeleton.getBoneByName(sourceBone.name);
            if (targetBone) {
                boneMap[sourceBone.name] = targetBone;
            }
        });

        sourceSkeleton.bones.forEach((sourceBone) => {
            const targetBone = boneMap[sourceBone.name];
            if (targetBone) {
                targetBone.matrix.copy(sourceBone.matrix);
                // targetBone.position.copy(sourceBone.position);
                // targetBone.quaternion.copy(sourceBone.quaternion);
                targetBone.rotation.copy(sourceBone.rotation);
            }
        });

        targetSkeleton.bones.forEach((bone) => bone.updateMatrixWorld(true));
    }

    getBoneTree(bone, result = {}){
        result.name = bone.name;
        result.children = bone.children.map((cBone) => getBoneTree(cBone));
        return result;
    }

    /**
     *
     * @param {Skeleton} skeleton
     * @param {AnimationClip} clip
     */
    removeInvalidAnimationBonesBasedOnSkeleton( skeleton, clip ){

        const boneNamesInModel1 = skeleton.bones.map(bone => bone.name);
        clip.tracks = clip.tracks.filter(track => {
            return boneNamesInModel1.includes(track.name.split('.')[0]);
        });

        if (clip.tracks.length === 0){
            console.error("[ManhuntMatrix] All animation tracks was removed!");
        }
    }

    /**
     * @deprecated use SkeletonHelper.logSkeletonHierarchy
     * @param skeleton
     * @param text
     * @return {string}
     */
    logSkeletonHierarchy(skeleton, text = "") {
        // Find root bones (bones without a parent bone)
        const rootBones = skeleton.bones.filter((bone) => {
            return !(bone.parent instanceof Bone);
        });

        // Recursively log the bone hierarchy
        rootBones.forEach((rootBone) => {
            logBoneHierarchy(rootBone, '');
        });

        function logBoneHierarchy(bone, prefix) {
            text += prefix + bone.name + "\n";
            // console.log(prefix + bone.name);
            bone.children.forEach((child) => {
                if (child instanceof Bone) {
                    logBoneHierarchy(child, prefix + '  ');
                }
            });
        }

        return text;
    }



    exportBoneMatrices(bones){
        let lines = {};
        bones.forEach((bone) => {

            lines[this.getBoneNameByBoneId(parseInt(bone.name.replace("bone_", '')))] = {
                quaternion: bone.quaternion.toArray(),
                position: bone.position.toArray()
            };
        });

        console.log(lines);
    }

}

export default new ManhuntMatrix();